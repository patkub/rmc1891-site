<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">

    <title>RMC Text View</title>
    
    <script src="../../bower_components/webcomponentsjs/webcomponents-lite.js"></script>
    <script src="../../bower_components/web-component-tester/browser.js"></script>

    <!-- Import the element to test -->
    <link rel="import" href="../../app/src/elements/rmc-text-view.html">
  </head>
  <body>
    <test-fixture id="RMCTextView">
      <template>
        <rmc-text-view view="view" title="title"></rmc-text-view>
      </template>
    </test-fixture>
    <test-fixture id="RMCTextViewEditable">
      <template>
        <rmc-text-view view="view" title="title" editable></rmc-text-view>
      </template>
    </test-fixture>

    <script>
      suite('rmc-text-view tests', function() {
        let rmcTextView;

        setup(function() {
          rmcTextView = fixture('RMCTextView');
        });
        
        suite('defines properties', function() {
          test('defines the "view" property', function() {
            assert.equal(rmcTextView.view, 'view');
          });
          
          test('defines the "title" property', function() {
            assert.equal(rmcTextView.title, 'title');
          });
        });
        
        suite('contians elements', function() {
          test('it should have an iron-ajax element to load the text', function(done) {
            flush(function() {
              let el = rmcTextView.shadowRoot.querySelector('#' + rmcTextView.view + 'textViewGetAjax');
              assert.equal(el.id, rmcTextView.view + 'textViewGetAjax');
              done();
            });
          });
        });
        
        suite('when editable', function() {
          let rmcTextViewEditable;
          
          setup(function() {
            rmcTextViewEditable = fixture('RMCTextViewEditable');
          });
          
          suite('defines properties', function() {
            test('defines the "editable" property', function() {
              assert.equal(rmcTextViewEditable.editable, true);
            });
          });
          
          suite('contians elements', function() {
            test('it should have a what-you-see-is-what-you-get editor', function(done) {
              flush(function() {
                let el = rmcTextViewEditable.shadowRoot.querySelector('wysiwyg-e');
                assert.equal(el.tagName, 'WYSIWYG-E');
                done();
              });
            });
          });
        });
      });
    </script>
  </body>
</html>
